/* --- 초기화 및 기본 설정 --- */
* { margin: 0; padding: 0; box-sizing: border-box; }
body { display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #E5E5E5; font-family: "Pretendard", sans-serif; }
#app-container { width: 95vw; max-width: 1400px; height: 90vh; max-height: 850px; display: flex; background: #FFFFFF; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); overflow: hidden; }

/* --- 사이드바 --- */
.sidebar { width: 320px; background: #4A5568; padding: 40px; display: flex; flex-direction: column; color: #FFFFFF; flex-shrink: 0; }
.logo { display: flex; align-items: center; gap: 15px; margin-bottom: 60px; }
.logo h1 { font-size: 48px; font-weight: 800; }
.logo-text { display: flex; flex-direction: column; }
.logo-text span { font-size: 18px; font-weight: 600; line-height: 1.2; }
.menu { display: flex; flex-direction: column; gap: 10px; }
.menu-item { width: 100%; padding: 15px 20px; border: none; background: transparent; border-radius: 8px; font-size: 18px; font-weight: 600; color: #FFFFFF; text-align: left; cursor: pointer; transition: background-color 0.2s ease; }
.menu-item:hover { background-color: rgba(255, 255, 255, 0.1); }
.menu-item.active { background-color: #FFFFFF; color: #333333; }

/* --- 메인 콘텐츠 --- */
.main-content { flex-grow: 1; padding: 40px; display: flex; flex-direction: column; background-color: #FFFFFF; }
.main-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
#main-title { font-weight: 800; font-size: 32px; color: #333333; }
.version { font-weight: 600; font-size: 16px; color: #A0A0A0; }
.content-area { flex-grow: 1; border-radius: 8px; overflow: hidden; }

/* --- CEDA 타이머 공통 스타일 --- */
.ceda-timer-view { display: flex; width: 100%; height: 100%; background-color: #27384E; color: #F5EFE7; border-radius: 8px; position: relative; overflow: hidden; }

/* --- 타임라인 패널 --- */
.timeline-panel { width: 380px; padding: 20px 0; box-sizing: border-box; border-right: 1px solid #555; overflow-y: auto; transition: all 0.3s ease; flex-shrink: 0; }
.timeline-list { width: 100%; }
.timeline-item { position: relative; padding: 14px 30px; font-size: 20px; color: #bbb; text-align: left; overflow: hidden; cursor: pointer; transition: all 0.2s ease; }
.timeline-item.active, .timeline-item.active:hover { background-color: #F5EFE7; color: #27384E; font-weight: 700; }
.timeline-item:hover { background-color: rgba(255, 255, 255, 0.1); color: #fff; }

/* --- 타이머 패널 (오른쪽 영역) --- */
.timer-panel {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: flex-start; 
    align-items: center;
    position: relative;
    padding: 8% 2% 2%; 
}
#sequence-timer-display, #free-debate-display { display: none; width: 100%; height: 100%; justify-content: center; align-items: center; }
.sequence-mode #sequence-timer-display { display: flex; align-items: flex-start; } 
.free-debate-mode #free-debate-display { display: flex; }

/* --- 일반 순서 타이머 --- */
.timer-display-area { width: 60%; max-width: 480px; aspect-ratio: 1 / 1; position: relative; background-color: #F5EFE7; border-radius: 50%; display: flex; justify-content: center; align-items: center; flex-shrink: 0; }
.timer-svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; transform: rotate(-90deg); overflow: visible; }
.timer-svg circle { fill: none; }
.timer-progress { stroke: #27384E; stroke-width: 2; stroke-dasharray: 339.292; stroke-dashoffset: 0; transition: stroke-dashoffset 0.5s linear; }
.timer-content { text-align: center; position: relative; z-index: 1; }
.timer-title { font-size: 40px; font-weight: 300; color: #27384E; }
.timer-time { font-size: 80px; font-weight: 400; margin-top: 10px; color: #27384E; letter-spacing: -2px; }

/* --- 자유토론 타이머 --- */
.debate-panel { width: 50%; height: 100%; display: flex; position: relative; overflow: hidden; cursor: pointer; transition: opacity 0.3s ease; }
.debate-panel.active { cursor: default; }
.debate-panel .content { width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: space-around; padding: 10% 0; z-index: 1; }
.debate-panel .color-fill { position: absolute; bottom: 0; left: 0; width: 100%; transition: height 0.5s linear; z-index: 0; }
.pros-panel { background-color: #27384E; } .cons-panel { background-color: #4C2324; }
.pros-panel .color-fill { background-color: #3a506b; } .cons-panel .color-fill { background-color: #9E3637; }
.debate-panel:not(.active) { opacity: 0.5; }
.free-timer-circle { width: 70%; max-width: 280px; aspect-ratio: 1/1; border-radius: 50%; display: flex; justify-content: center; align-items: center; position: relative; }
.free-timer-circle .timer-svg { z-index: 2; }
.free-timer-circle .turn-progress-track { stroke: rgba(245, 239, 231, 0.3); stroke-width: 4; }
.free-timer-circle .turn-progress { stroke: #F5EFE7; stroke-width: 4; stroke-dasharray: 339.292; stroke-dashoffset: 0; transition: stroke-dashoffset 0.5s linear; }
.timer-text-content { text-align: center; }
.free-timer-title { font-size: clamp(16px, 3vw, 28px); font-weight: 300; }
.free-timer-time { font-size: clamp(32px, 5.5vw, 60px); font-weight: 400; margin-top: 10px; }
.turn-timer { text-align: center; visibility: hidden; opacity: 0; transition: visibility 0s, opacity 0.3s linear; }
.debate-panel.active .turn-timer { visibility: visible; opacity: 1; }
.turn-timer-title { font-size: clamp(12px, 1.5vw, 18px); font-weight: 300; }
.turn-timer-time { font-size: clamp(24px, 3vw, 40px); font-weight: 500; margin-top: 5px; }

/* --- 공용 및 모드별 컨트롤 --- */
.timer-controls { position: absolute; bottom: 5%; display: flex; flex-direction: column; align-items: center; gap: 10px; width: 100%; z-index: 20; }
.timer-controls button { background: none; border: none; cursor: pointer; color: #F5EFE7; transition: opacity 0.2s ease; }
#toggle-btn { display: none; height: 45px; margin-bottom: 5px; }
.step-controls, .time-adjust-controls { display: flex; gap: 20px; }
.step-btn { font-size: 18px; opacity: 0.7; }
.time-adjust-btn { font-size: 16px; opacity: 0.7; border: 1px solid #F5EFE7; border-radius: 15px; padding: 5px 12px; }
.step-btn:hover, .time-adjust-btn:hover { opacity: 1; }
.step-btn:disabled { opacity: 0.3; cursor: not-allowed; }

/* [수정] 발언자 전환 버튼을 항상 숨김 처리 */
#switch-turn-btn {
    display: none !important;
}

.sequence-mode .timer-controls { display: flex; }
.free-debate-mode .timer-controls { display: none; }

/* --- 자유토론 패널 내부 컨트롤 --- */
.panel-controls { display: flex; flex-direction: column; align-items: center; gap: 10px; visibility: hidden; opacity: 0; transition: opacity 0.3s; }
.panel-toggle-btn { height: 45px; visibility: hidden; opacity: 0; transition: opacity 0.3s; }
.debate-panel.active .panel-controls, .debate-panel.active .panel-toggle-btn { visibility: visible; opacity: 1; }
.panel-time-adjust-btn { color: #F5EFE7; background: transparent; border: 1px solid #F5EFE7; border-radius: 15px; padding: 5px 12px; font-size: clamp(12px, 1.2vw, 16px); cursor: pointer; opacity: 0.7; }
.panel-time-adjust-btn:hover { opacity: 1; }
.panel-toggle-btn { background: none; border: none; cursor: pointer; z-index: 5;}

/* --- 시작/중지 버튼 모양 (공용) --- */
#toggle-btn.play, .panel-toggle-btn.play { width: 0; height: 0; border-top: 20px solid transparent; border-bottom: 20px solid transparent; border-left: 30px solid #F5EFE7; }
#toggle-btn.pause, .panel-toggle-btn.pause { width: 30px; border-left: 10px solid #F5EFE7; border-right: 10px solid #F5EFE7; height: 40px; }
.sequence-mode.stopped #toggle-btn.play, .sequence-mode.running #toggle-btn.pause { display: block; }
.free-debate-mode.stopped .panel-toggle-btn.play, .free-debate-mode.running .panel-toggle-btn.pause { display: block; }

/* --- 전체화면 --- */
#fullscreen-btn { position: absolute; top: 20px; right: 20px; font-size: 16px; font-weight: 600; color: #F5EFE7; background-color: rgba(255,255,255,0.1); padding: 8px 16px; border-radius: 20px; z-index: 20; cursor: pointer; }
#fullscreen-btn:hover { background-color: rgba(255,255,255,0.2); }
.ceda-timer-view:fullscreen { padding: 2vw; }
.ceda-timer-view:fullscreen .timeline-panel { width: 30%; height: 90%; }
.ceda-timer-view:fullscreen .timer-panel { height: 100%; }
.ceda-timer-view:fullscreen .timer-display-area { width: 60%; max-width: 60vh; }
.ceda-timer-view:fullscreen .turn-timer-title { font-size: 2vw; }
.ceda-timer-view:fullscreen .turn-timer-time { font-size: 4vw; }